<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>精彩的人生</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/life.css"> <!-- Link to original life.css -->
</head>
<body>
<h1 class="page-title" style="text-align:center;">精彩的人生</h1>

<div class="home-link-container">
  <a href="index.html" class="home-link">&larr; 返回首頁</a>
</div>

<div class="timeline" id="timeline"> <!-- Changed id and class -->
  <!-- New timeline content will be generated here by JavaScript -->
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const timeline = document.getElementById('timeline'); // Changed id

  function getIconForEvent(eventText) {
    if (eventText.includes("出生")) return "🎉";
    if (eventText.includes("畢業") || eventText.includes("學士") || eventText.includes("碩士") || eventText.includes("博士") || eventText.includes("考取") || eventText.includes("入學")) return "🎓";
    if (eventText.includes("講師") || eventText.includes("副教授") || eventText.includes("主任") || eventText.includes("院長") || eventText.includes("任教") || eventText.includes("研究")) return "💼";
    if (eventText.includes("結婚")) return "💍";
    if (eventText.includes("赴美") || eventText.includes("遊歷世界")) return "✈️";
    if (eventText.includes("退休")) return "🏖️";
    if (eventText.includes("天使")) return "👼";
    return "⭐";
  }

  const colors = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5'];

  fetch('life_events.json')
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return response.json();
    })
    .then(lifeEvents => {
      lifeEvents.forEach((event, index) => {
        const timelineItem = document.createElement('div');
        timelineItem.classList.add('timeline-item');
        timelineItem.classList.add(index % 2 === 0 ? 'left' : 'right');

        const timelineContent = document.createElement('div');
        timelineContent.classList.add('timeline-content');
        timelineContent.classList.add(colors[index % colors.length]);

        const year = document.createElement('h3'); // Changed to h3 for consistency
        year.textContent = event.year;

        const eventText = document.createElement('p');
        eventText.textContent = event.event;

        const icon = document.createElement('div');
        icon.classList.add('icon');
        icon.textContent = getIconForEvent(event.event);

        timelineContent.appendChild(year);
        timelineContent.appendChild(eventText);
        timelineContent.appendChild(icon);

        if (event.image && Array.isArray(event.image) && event.image.length > 0) {
          const gallery = document.createElement('div');
          gallery.className = 'image-gallery';
          event.image.forEach(imagePath => {
            const img = document.createElement('img');
            img.src = imagePath;
            img.alt = event.event;
            gallery.appendChild(img);
          });
          timelineContent.appendChild(gallery);
        }

        timelineItem.appendChild(timelineContent);
        timeline.appendChild(timelineItem);
      });
    })
    .catch(error => {
      console.error('Error fetching or parsing data:', error);
      timeline.innerHTML = `<p style="color:red; text-align:center;">資料載入失敗: ${error.message}</p>`;
    });
});
</script>

<div class="home-link-container">
  <a href="index.html" class="home-link">&larr; 返回首頁</a>
</div>

</body>
</html>